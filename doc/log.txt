/**********记录实验测试时遇到的一些bug和解决方案************/

【网络连接类】
1、仪表主板ip：192.168.1.102 
FPGA ip：192.168.1.100
localhost：192.168.1.98（与上面区分开就行）

2、远程桌面连接失败：
① 能否Ping通ip地址
② 是否修改了localhost的ip地址
③ 网口是否正常
④ 千兆网口和百兆网口的区分
⑤ 网线是否正常
⑥ 主板是否正常开启

【软件使用类】
1、模式一没有信号
① 任务管理器里以太网有无数据，数据量是否正确
② wireshark抓包的数据格式是否正确
③ 是否连接了光纤光栅
④ localhost是否更改对了ip地址
⑤ 软件的版本是否正确

2、采集卡接光表的线按照片中的要求来接，模式一四通道信号正常显示在通道一 通道三和通道四。

3、模式二没有解调信号
① 是否发送了peak.txt配置文件
② 任务管理器里以太网有无数据，数据量是否正确
③ 是否正确使用软件
④ wireshark抓包的数据格式是否正确

4、模式二解调信号非正常显示
① 峰值位置是否正确（软件手动寻峰后需要减1）
② peak.txt的第一个peakPos是无效数据
③ 四通道原始信号是否正常，若正常，则是软件解调的问题；若不正常，则是采集卡和FPGA发送的问题
④ 若解调波形出现明显毛刺现象，则是数据错位，需要发送复位信号给FPGA然后重发配置文件，并重启软件。

5、Qt_UDP_DAS_v6在关闭窗口后进程没有退出，需要在任务管理器里结束进程。

【UDP通信类】
1、模式一UDP数据帧格式

2048位  2048*31位 2048   2048*31
|头帧| |31个数据帧| |头帧| |31个数据帧| ......

            8位char            16位char          2024位char
头帧：|XXXXXXXX||6666666666666666||XXXX...XXXX|
               2048位char
数据帧：|XXXX........XXXX|

2、模式二UP数据帧格式

 2048      2048     2048
|数据帧| |数据帧| |数据帧|......       
	8位char          16位char             16*(peakNum-1)位char     16位char              16*(peakNum-1)位char             (2048-8)%(16*peakNum)位char
数据帧：|XXXXXXXX| |6666666666666666| |XXXXXXXX...XXXXXXXX| |6666666666666666| |XXXXXXXX...XXXXXXXX| ...... |6666666666666666XXXXXXXX....XXXXXXXX|

3、数据帧解析
|6666666666666666003D011A040F00020298025B002700010CCD0D9D0D4C00020ED60EC30E870002| |66666666666666660FF401E5037E000202930271003A00020CC50DA10D5000000ECF0EC40E8A0001| ......
|CH1Region1| |CH2Region1| |CH3Region1| |CH4Region1| |CH1Region2| |CH2Region2| |CH3Region2| |CH4Region2| |CH1Region3| |CH2Region3| |CH3Region3| |CH4Region3| ...... |CH1RegionN| |CH2RegionN| |CH3RegionN| |CH4RegionN|  

【FPGA设置类】
1、FPGA发送数据错误，在帧头加入非正常数据
2、FPGA发送速率错误
3、FPGA丢帧
4、重启FPGA是一种好方法

【电表连接类】
1、FPGA通过网口直接与电脑相连需要千兆网口（不能使用百兆网口，因为协议不同）
2、通过远程连接电表主板无网口速率要求
3、电表连接EDFA通过串口线操作，串口号是COM5，波特率115200，软件是脉锐的
4、接电表线路时请佩戴乳胶手套，注意220v高压危险！

【光表和仪器使用类】
1、光表很少出现仪器问题
2、光表与电表接四根线通信：3x3耦合器的三路输出信号线和SOA同步信号线
3、可不接电表，将四根线接示波器，通过示波器采集信号，这时采集的是原始数字电信号，需要转化为数值信号，解调，滤波等。